services:
    _defaults:
        autowire: true
        autoconfigure: true
        public: false

    Duo\AdminBundle\:
        resource: '../../*'
        exclude: '../../{Entity,Repository,Tests,Configuration}'

    Duo\AdminBundle\Controller\:
        resource: '../../Controller'
        public: true
        tags: ['controller.service_arguments']

    duo.admin.breadcrumb_helper:
        class: Duo\AdminBundle\Helper\BreadcrumbHelper
        public: true

    duo.admin.locale_helper:
        class: Duo\AdminBundle\Helper\LocaleHelper
        public: true
        calls:
            - [ setDefaultLocale, [ '%locale%' ]]
            - [ setLocalesFromString, [ '%locales%' ]]

    duo.admin.mailer_helper:
        class: Duo\AdminBundle\Helper\MailerHelper
        arguments:
            $twig: '@twig'
            $emailFrom: '%mailer_from%'
            $dkimConfig: { keyFile: '%dkim_key_file%', domain: '%dkim_domain%', selector: '%dkim_selector%' }
        public: true

    duo.admin.menu_builder:
        class: Duo\AdminBundle\Menu\MenuBuilder
        public: true

    Duo\AdminBundle\EventListener\TranslateListingListener:
        arguments:
            $localeHelper: '@duo.admin.locale_helper'
        tags:
            - { name: kernel.event_listener, event: duo.event.listing.form.preAdd, method: preAdd }
            - { name: kernel.event_listener, event: duo.event.listing.form.preEdit, method: preEdit }

    Duo\AdminBundle\EventSubscriber\LocaleSubscriber:
        arguments:
            $defaultLocale: '%locale%'
        tags:
            - { name: kernel.event_subscriber }

    Duo\AdminBundle\Twig\LocaleTwigExtension:
        arguments:
            $localeHelper: '@duo.admin.locale_helper'
        tags:
            - { name: twig.extension }

    Duo\AdminBundle\Routing\UrlLoader:
        arguments:
            $localeHelper: '@duo.admin.locale_helper'
        tags:
            - { name: routing.loader, priority: 0 }