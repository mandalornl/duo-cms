{% extends '@DuoAdmin/index.html.twig' %}

{% block toolbar %}
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark justify-content-between">
		<a href="{{ path('duo_admin_listing_' ~ list.type ~ '_index') }}" class="navbar-brand">Duo</a>
		<form class="form-inline my-2 my-lg-0">
			<div class="btn-toolbar" role="toolbar" aria-label="{{ 'duo.admin.toolbar.actions.label' | trans }}">
				<div class="btn-group" role="group">
					<div class="btn-group" role="group">
						<button id="actions_{{ list.type }}" type="button" class="btn btn-light dropdown-toggle" data-toggle="dropdown">
							{{- 'duo.admin.toolbar.dropdown.global.more' | trans -}}
						</button>
						<div class="dropdown-menu" aria-labelledby="actions_{{ list.type }}">
							<button type="button" class="dropdown-item" data-toggle="modal" data-target="">
								{{- 'duo.admin.listing.action.delete' | trans -}}
							</button>
						</div>
					</div>
					<a href="{{ path('duo_admin_listing_' ~ list.type ~ '_add') }}" class="btn btn-primary">
						{{- 'duo.admin.toolbar.actions.new' | trans({
							'%type%': list.localizedType
						}) -}}
					</a>
				</div>
			</div>
		</form>
	</nav>
{% endblock %}

{% block content %}
	{% if paginator.canPaginate() %}
		{{ paginator_widget(paginator, path('duo_admin_listing_' ~ list.type ~ '_index')) }}
	{% endif %}

	{% set uniqid = random() %}
	<form action="javascript:;" method="post" class="form-list">
		<div class="table-responsive">
			<table class="table table-hover table-striped table-list checkable">
				<thead>
					<tr>
						<th>
							<label for="{{ uniqid }}_all" class="custom-control custom-checkbox">
								<input type="checkbox" id="{{ uniqid }}_all" class="custom-control-input"{% if not paginator.count %} disabled{% endif %}>
								<span class="custom-control-indicator"></span>
							</label>
						</th>
						{% for field in list.fields %}
							<th{% if field.sortable %} class="sortable"{% endif %}>
								{{- field.title | trans -}}
							</th>
						{% endfor %}
						<th>&nbsp;</th>
					</tr>
				</thead>
				<tbody>
					{% for entity in paginator.result %}
						<tr data-url="{{ path('duo_admin_listing_' ~ list.type ~ '_edit', { id: entity.id }) }}">
							<td>
								<label for="{{ uniqid }}_{{ entity.id }}" class="custom-control custom-checkbox">
									<input type="checkbox" id="{{ uniqid }}_{{ entity.id }}" value="{{ entity.id }}" class="custom-control-input">
									<span class="custom-control-indicator"></span>
								</label>
							</td>
							{% for field in list.fields %}
								<td>
									{%- if field.template -%}
										{%- include field.template -%}
									{%- else -%}
										{%- include '@DuoAdmin/Listing/Field/default.html.twig' -%}
									{%- endif -%}
								</td>
							{% endfor %}
							<td>
								{% if list.isSortable %}
									<a href="{{ path('duo_admin_listing_' ~ list.type ~ '_move_up', { id: entity.id }) }}" title="{{ 'duo.admin.listing.action.move_up' | trans }}">
										<i class="icon-arrow-up"></i>
									</a>
									<a href="{{ path('duo_admin_listing_' ~ list.type ~ '_move_down', { id: entity.id }) }}" title="{{ 'duo.admin.listing.action.move_down' | trans }}">
										<i class="icon-arrow-down"></i>
									</a>
								{% endif %}
								{% if list.isDeletable %}
									<a href="{{ path('duo_admin_listing_' ~ list.type ~ '_delete', { id: entity.id }) }}" data-modal="delete" title="{{ 'duo.admin.listing.action.delete' | trans }}">
										<i class="icon-bin"></i>
									</a>
								{% else %}
									<a href="{{ path('duo_admin_listing_' ~ list.type ~ '_destroy', { id: entity.id }) }}" data-modal="delete" title="{{ 'duo.admin.listing.action.delete' | trans }}">
										<i class="icon-bin"></i>
									</a>
								{% endif %}
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</form>
{% endblock %}

{% block modal %}
	{% include '@DuoAdmin/Listing/Modal/confirm.html.twig' with {
		id: 'delete',
		title: 'duo.admin.modal.delete.title' | trans,
		body: 'duo.admin.modal.delete.body' | trans({ '%type%': list.localizedType })
	} %}
{% endblock %}